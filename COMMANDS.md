# Справочник команд УВМ (Вариант №15)

## Команды ассемблера

### LOAD_CONST - Загрузка константы
```
LOAD_CONST <константа> <адрес>
```

**Описание:** Загружает константу в ячейку памяти

**Параметры:**
- `константа` - значение от 0 до 2047 (11 бит)
- `адрес` - адрес ячейки памяти от 0 до 67108863 (26 бит)

**Пример:**
```assembly
LOAD_CONST 42 100    # memory[100] = 42
```

**Машинный код:** 6 байт

---

### READ_MEM - Чтение из памяти с косвенной адресацией
```
READ_MEM <смещение> <адрес_источника> <адрес_назначения>
```

**Описание:** Читает значение из памяти по косвенному адресу с смещением

**Параметры:**
- `смещение` - смещение от 0 до 255 (8 бит)
- `адрес_источника` - адрес ячейки, содержащей базовый адрес (26 бит)
- `адрес_назначения` - адрес для записи прочитанного значения (26 бит)

**Пример:**
```assembly
LOAD_CONST 100 500        # memory[500] = 100 (базовый адрес)
LOAD_CONST 42 105         # memory[105] = 42
READ_MEM 5 500 600        # memory[600] = memory[memory[500] + 5]
                          # memory[600] = memory[100 + 5]
                          # memory[600] = memory[105] = 42
```

**Машинный код:** 9 байт

---

### WRITE_MEM - Запись в память
```
WRITE_MEM <адрес_источника> <адрес_назначения>
```

**Описание:** Копирует значение из одной ячейки памяти в другую

**Параметры:**
- `адрес_источника` - адрес ячейки-источника (26 бит)
- `адрес_назначения` - адрес ячейки-приёмника (26 бит)

**Пример:**
```assembly
LOAD_CONST 99 100         # memory[100] = 99
WRITE_MEM 100 200         # memory[200] = memory[100] = 99
```

**Машинный код:** 8 байт

---

### GTE - Операция "больше или равно" (>=)
```
GTE <смещение1> <адрес1> <адрес2> <адрес_результата> <смещение2>
```

**Описание:** Сравнивает два значения, результат (0 или 1) записывает в память

**Параметры:**
- `смещение1` - смещение для первого операнда от 0 до 255 (8 бит)
- `адрес1` - адрес ячейки с базовым адресом первого операнда (26 бит)
- `адрес2` - адрес ячейки со вторым операндом (26 бит)
- `адрес_результата` - адрес ячейки с базовым адресом результата (26 бит)
- `смещение2` - смещение для результата от 0 до 255 (8 бит)

**Вычисление:**
```
операнд1 = memory[memory[адрес1] + смещение1]
операнд2 = memory[адрес2]
результат = 1 если операнд1 >= операнд2, иначе 0
memory[memory[адрес_результата] + смещение2] = результат
```

**Пример:**
```assembly
LOAD_CONST 10 100         # memory[100] = 10
LOAD_CONST 5 200          # memory[200] = 5
LOAD_CONST 100 500        # memory[500] = 100 (базовый адрес)
LOAD_CONST 300 501        # memory[501] = 300 (адрес для результата)
GTE 0 500 200 501 0       # memory[300] = (memory[100] >= memory[200])
                          # memory[300] = (10 >= 5) = 1
```

**Машинный код:** 13 байт

---

## Комментарии

Комментарии начинаются с символа `#`:

```assembly
# Это комментарий
LOAD_CONST 10 100  # Комментарий в конце строки
```

---

## Типичные паттерны

### Инициализация массива
```assembly
LOAD_CONST 10 100
LOAD_CONST 20 101
LOAD_CONST 30 102
```

### Копирование элемента массива
```assembly
LOAD_CONST 100 500    # Базовый адрес источника
READ_MEM 0 500 600    # Читаем элемент
WRITE_MEM 600 200     # Записываем в новое место
```

### Сравнение элементов
```assembly
LOAD_CONST 15 100     # Первое значение
LOAD_CONST 10 200     # Второе значение
LOAD_CONST 100 500    # Базовый адрес
LOAD_CONST 300 501    # Адрес результата
GTE 0 500 200 501 0   # Сравнение
```

---

## Ограничения

- Максимальная константа: 2047 (11 бит)
- Максимальный адрес: 67108863 (26 бит)
- Максимальное смещение: 255 (8 бит)
- Размер памяти данных: настраивается (по умолчанию 100000 ячеек)

---

## Коды операций

- LOAD_CONST: 111 (0x6F)
- READ_MEM: 40 (0x28)
- WRITE_MEM: 101 (0x65)
- GTE: 68 (0x44)
